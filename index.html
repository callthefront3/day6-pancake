<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>퐁실퐁실 수플레 마스터 (Hardcore + 🦊)</title>
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">
    <link href="base.css" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <div id="timer-wrapper"><div id="timer-bar"></div></div>
        <div id="game-status" style="font-size: 1.1rem; color: #333;">준비 완료!</div>
        <div id="global-msg"></div>

        <div id="start-screen" class="stage active">
            <div style="margin-top: 30px;">
                <h1>🥞 퐁실퐁실<br>수플레 마스터</h1>
                <h2 style="font-size:1rem; color:#888;">🔥 Hardcore Edition + 🦊 🔥</h2>
                <div class="character">👩‍🍳</div>
                <p style="background:#FFF9C4; padding:10px; border-radius:10px; font-size:0.95rem;">
                    <b>가속하는 계란, 후추범 토끼,<br>관성 불조절, 기억력 테스트...</b><br>
                    그리고 <b style="color:red;">팬케이크 도둑 여우</b>까지?!<br>
                    당신은 진정한 장인입니까?
                </p>
            </div>
            <div style="flex-grow:1;"></div>
            <button id="start-btn">도전 시작하기!</button>
        </div>

        <div id="stage-1" class="stage">
            <h2>1단계: 3연속 계란 깨기</h2>
            <p class="info-text">계란 3개를 연속으로 깨야 합니다.<br>갈수록 빨라지고 좁아집니다!</p>
            <div class="egg-count" id="egg-counter">
                <span id="egg-icon-1">🥚</span> <span id="egg-icon-2">🥚</span> <span id="egg-icon-3">🥚</span>
            </div>
            
            <div id="crack-zone">
                <div id="crack-target" style="left: 40%; width: 20%;"></div>
                <div id="crack-needle"></div>
            </div>
            
            <div style="flex-grow:1; display:flex; align-items:center; justify-content:center;">
                <div class="character" id="egg-char">🥚</div>
            </div>
            <button id="crack-btn">탁! (집중하세요)</button>
        </div>

        <div id="stage-2" class="stage">
            <h2>2단계: 반죽 사수하기</h2>
            <p class="info-text">원을 그리며 빠르게 섞으세요!<br><span class="warning-text">🐰토끼가 반죽에 후추를 훔쳐갑니다! 즉시 처치!</span></p>
            <div class="status-bar"><div id="mix-fill" class="fill"></div></div>
            
            <div id="bowl-area">
                <span style="font-size:4rem;">🥣</span>
                <div id="rabbit-intruder" class="intruder hidden" style="top: -10px; right: -10px;">🐰</div>
            </div>
            <p id="mix-percent" style="font-weight:bold; font-size:1.5rem; margin:10px 0;">0%</p>
            <div style="flex-grow:1;"></div>
        </div>

        <div id="stage-3" class="stage">
            <h2>3단계: 아슬아슬 머랭</h2>
            <p class="info-text">연타하여 90%~99%에 멈추세요.<br><span class="warning-text">⚠️ 100% 넘으면 즉시 실패(0점)!</span></p>
            <div class="status-bar" style="background:#333;">
                <div class="danger-zone"></div>
                <div id="meringue-fill" class="fill" style="background:#fff;"></div>
            </div>
            <div id="meringue-foam">☁️</div>
            <div style="flex-grow:1;"></div>
            <button id="whisk-btn" style="touch-action: manipulation;">휘핑하기! (조심해!)</button>
            <button id="stop-whisk-btn" style="background:#4CAF50; color:white; margin-top:5px;">멈추기 (완성)</button>
        </div>

        <div id="stage-4" class="stage">
            <h2>4단계: 불조절과 도둑 여우</h2>
            <p class="info-text">움직이는 초록 칸에 온도를 맞추세요.<br><span class="warning-text">🦊여우가 나타나면 1.5초 안에 잡으세요! 안 그러면 훔쳐갑니다!</span></p>
            
            <div style="display:flex; justify-content: center; gap:15px; align-items: flex-end; height:200px;">
                <div id="temp-gauge">
                    <div id="temp-target"></div>
                    <div id="temp-indicator"></div>
                </div>
                <div id="pan-area">
                    <span id="pancake">🥞</span>
                    <div id="fox-intruder" class="intruder hidden" style="bottom: -10px; right: -20px; width:60px; height:60px; font-size:2.5rem; z-index:101;">🦊</div>
                </div>
            </div>
            
            <div style="flex-grow:1;"></div>
            <button id="heat-btn" style="user-select:none; -webkit-user-select:none;">🔥 가열 (꾹 누르기)</button>
        </div>

        <div id="stage-5" class="stage">
            <h2>5단계: 블라인드 토핑</h2>
            <p class="info-text">3초 뒤에 주문표가 사라집니다.<br>기억력을 믿고 순서대로 올리세요!</p>
            
            <div id="order-display">
                <div id="order-content">주문 로딩중...</div>
            </div>
            <div class="character" id="drop-zone" style="border: 2px dashed #ddd; border-radius: 50%; width: 100px; height: 100px; margin: 0 auto; display:flex; align-items:center; justify-content:center;">🥞</div>

            <div id="topping-box"></div>
        </div>

        <div id="result-screen" class="stage">
            <h2>🎉 요리 종료 🎉</h2>
            <div class="character" id="result-img">🥞</div>
            <div class="grade-badge" id="final-grade-text"></div>
            <div class="score-board">
                <div class="score-row"><span>1. 계란 (순발력)</span><span id="score-1">0</span></div>
                <div class="score-row"><span>2. 반죽 (위기관리)</span><span id="score-2">0</span></div>
                <div class="score-row"><span>3. 머랭 (자제력)</span><span id="score-3">0</span></div>
                <div class="score-row"><span>4. 굽기 (멀티태스킹)</span><span id="score-4">0</span></div>
                <div class="score-row"><span>5. 토핑 (기억력)</span><span id="score-5">0</span></div>
                <div class="score-row"><span>총점</span><span id="score-total">0</span></div>
            </div>
            <button id="restart-btn">다시 도전하기</button>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
