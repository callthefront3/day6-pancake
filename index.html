<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>íì‹¤íì‹¤ ìˆ˜í”Œë ˆ ë§ˆìŠ¤í„°</title>
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #FFD1DC; /* ì—°ë¶„í™ */
            --accent-color: #FF6B6B;
            --bg-color: #FFF5F0;
        }

        body {
            font-family: 'Gamja Flower', cursive, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100dvh;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
        }

        #game-container {
            width: 100%;
            max-width: 480px;
            height: 90dvh;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }

        h1 { margin: 10px 0; font-size: 1.5rem; color: #555; }
        h2 { margin: 0 0 15px 0; color: var(--accent-color); }

        /* ì „ìš© íƒ€ì´ë¨¸ ë°” (ìƒë‹¨ ê³ ì •) */
        #timer-wrapper { width: 100%; height: 10px; background: #eee; border-radius: 5px; margin-bottom: 10px; overflow: hidden; display: none; }
        #timer-bar { height: 100%; width: 100%; background: var(--accent-color); transition: width 0.1s linear; }

        /* ê³µí†µ UI ìš”ì†Œ */
        .stage { display: none; height: 100%; flex-direction: column; justify-content: space-between; }
        .active { display: flex; }
        
        .status-bar {
            background: #eee;
            border-radius: 10px;
            height: 20px;
            width: 100%;
            margin: 10px 0;
            overflow: hidden;
            position: relative;
        }
        
        .fill {
            height: 100%;
            background: #4CAF50;
            width: 0%;
            transition: width 0.1s linear;
        }

        .zone {
            position: absolute;
            top: 0;
            bottom: 0;
            background: rgba(255, 235, 59, 0.5);
            border-left: 2px solid #FBC02D;
            border-right: 2px solid #FBC02D;
            z-index: 1;
        }

        button {
            background: var(--primary-color);
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px #eeb0bb;
            transition: all 0.1s;
            font-weight: bold;
            color: #555;
        }
        button:active { transform: translateY(4px); box-shadow: none; }
        button:disabled { background: #ccc; box-shadow: none; color: #888; }

        .character { font-size: 4rem; margin: 20px 0; animation: bounce 1s infinite alternate; }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-10px); } }

        /* Stage 1: ê³„ë€ */
        #crack-zone { position: relative; height: 30px; background: #ddd; margin: 20px 0; border-radius: 15px; }
        #crack-bar { position: absolute; top:0; bottom:0; width: 5px; background: red; left: 0%; transition: left 0.05s linear; z-index: 2;}
        
        /* Stage 2: ë¯¹ì‹± */
        #bowl-area {
            width: 200px;
            height: 200px;
            background: #FFF9C4;
            border: 4px solid #FBC02D;
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .whisk-motion { animation: spin 0.5s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* ë°©í•´ê¾¼ (í† ë¼/ì—¬ìš°) */
        .intruder {
            position: absolute;
            width: 80px;
            height: 80px;
            font-size: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
            border: 2px solid red;
            cursor: pointer;
            z-index: 100;
            animation: shake 0.5s infinite;
        }
        @keyframes shake { 0% { transform: rotate(0deg); } 25% { transform: rotate(-10deg); } 75% { transform: rotate(10deg); } }

        /* Stage 3: ë¨¸ë­ */
        #meringue-foam { font-size: 5rem; transition: transform 0.2s; }

        /* Stage 4: êµ½ê¸° */
        #pan-area { 
            position: relative; 
            height: 150px; 
            background: #3E2723; 
            border-radius: 50%; 
            margin: 20px; 
            display: flex; 
            justify-content: center; 
            align-items: center;
        }
        #pancake { font-size: 4rem; opacity: 0.5; transition: color 0.5s; }
        #temp-gauge { height: 150px; width: 30px; background: #ddd; margin: 0 auto; position: relative; border-radius: 10px; overflow: hidden;}
        #temp-indicator { height: 10%; width: 100%; background: red; position: absolute; bottom: 0; transition: bottom 0.1s; }
        #temp-target { position: absolute; bottom: 40%; height: 30%; width: 100%; background: rgba(0,255,0,0.3); border-top: 1px solid green; border-bottom: 1px solid green;}

        /* Stage 5: í† í•‘ (ìˆ˜ì •ë¨) */
        #topping-box { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 10px; }
        .topping-item { 
            padding: 10px; border: 2px solid #eee; border-radius: 10px; 
            cursor: pointer; transition: 0.2s; background: white; width: 60px;
        }
        .topping-item:hover { background: #FFEBEE; border-color: var(--accent-color); }
        #order-display {
            font-size: 1.2rem; font-weight: bold; color: #555;
            background: #fff; border: 2px dashed #aaa; padding: 10px; border-radius: 10px; margin: 10px 0;
        }
        .current-target { color: var(--accent-color); font-size: 1.4rem; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* ê²°ê³¼ í™”ë©´ */
        #result-screen { text-align: center; }
        .score-row { display: flex; justify-content: space-between; padding: 5px 20px; border-bottom: 1px solid #eee; }
        .final-grade { font-size: 1.5rem; color: var(--accent-color); font-weight: bold; margin: 20px 0; }

        /* ìœ í‹¸ë¦¬í‹° */
        .hidden { display: none !important; }
        .info-text { font-size: 0.9rem; color: #777; margin-bottom: 10px; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="timer-wrapper"><div id="timer-bar"></div></div>

    <div id="game-status">ì¤€ë¹„ ì™„ë£Œ!</div>
    <div id="global-msg" style="color:red; height:20px; font-size:0.8rem;"></div>

    <div id="start-screen" class="stage active">
        <div>
            <h1>ğŸ¥ íì‹¤íì‹¤<br>ìˆ˜í”Œë ˆ ë§ˆìŠ¤í„°</h1>
            <div class="character">ğŸ‘©â€ğŸ³</div>
            <p>5ë‹¨ê³„ ë¯¸ë‹ˆê²Œì„ì„ í†µê³¼í•˜ì—¬<br>ìµœê³ ì˜ ìˆ˜í”Œë ˆë¥¼ ë§Œë“œì„¸ìš”!</p>
        </div>
        <button id="start-btn">ìš”ë¦¬ ì‹œì‘í•˜ê¸°</button>
    </div>

    <div id="stage-1" class="stage">
        <h2>1ë‹¨ê³„: ê³„ë€ ê¹¨ê¸°</h2>
        <p class="info-text">ê²Œì´ì§€ê°€ ë…¸ë€ ì˜ì—­ì¼ ë•Œ 'íƒ!' ëˆ„ë¥´ì„¸ìš”.</p>
        <div class="character">ğŸ¥š</div>
        <div id="crack-zone">
            <div class="zone" style="left: 40%; width: 20%;"></div>
            <div id="crack-bar"></div>
        </div>
        <div style="flex-grow:1;"></div>
        <button id="crack-btn">íƒ! ê¹¨ê¸°</button>
    </div>

    <div id="stage-2" class="stage">
        <h2>2ë‹¨ê³„: ë°˜ì£½ & í›„ì¶” ë°©ì–´</h2>
        <p class="info-text">ê·¸ë¦‡ ì•ˆì„ ë¬¸ì§ˆëŸ¬ ì„ìœ¼ì„¸ìš”!<br>ğŸ°í† ë¼ê°€ ë‚˜íƒ€ë‚˜ë©´ í´ë¦­í•´ì„œ ì«“ì•„ë‚´ì„¸ìš”!</p>
        <div class="status-bar"><div id="mix-fill" class="fill"></div></div>
        
        <div id="bowl-area">
            <span style="font-size:3rem;">ğŸ¥£</span>
            <div id="rabbit-intruder" class="intruder hidden" style="top: -20px; right: -20px;">ğŸ°</div>
        </div>
        <div style="flex-grow:1;"></div>
        <p id="mix-msg">ë°˜ì£½ ì§„í–‰ë„: 0%</p>
    </div>

    <div id="stage-3" class="stage">
        <h2>3ë‹¨ê³„: ë¨¸ë­ ì¹˜ê¸°</h2>
        <p class="info-text">ë²„íŠ¼ì„ ë¹ ë¥´ê²Œ ì—°íƒ€í•˜ì—¬<br>ë‹¨ë‹¨í•œ ë¨¸ë­ì„ ë§Œë“œì„¸ìš”!</p>
        <div class="status-bar"><div id="meringue-fill" class="fill"></div></div>
        <div id="meringue-foam">â˜ï¸</div>
        <div style="flex-grow:1;"></div>
        <button id="whisk-btn">íœ˜í•‘í•˜ê¸°! (ì—°íƒ€)</button>
    </div>

    <div id="stage-4" class="stage">
        <h2>4ë‹¨ê³„: ë¶ˆ ì¡°ì ˆ & ì—¬ìš° ë°©ì–´</h2>
        <p class="info-text">ë²„íŠ¼ì„ ëˆŒëŸ¬ ì˜¨ë„ë¥¼ ì´ˆë¡ìƒ‰ ì¹¸ì— ìœ ì§€í•˜ì„¸ìš”.<br>ğŸ¦Šì—¬ìš°ê°€ ë³´ì´ë©´ ì¦‰ì‹œ í´ë¦­í•˜ì„¸ìš”!</p>
        
        <div style="display:flex; justify-content: center; gap:20px; align-items: flex-end;">
            <div id="temp-gauge">
                <div id="temp-target"></div>
                <div id="temp-indicator"></div>
            </div>
            <div id="pan-area">
                <span id="pancake">ğŸ¥</span>
                <div id="fox-intruder" class="intruder hidden" style="bottom: -10px; right: -30px;">ğŸ¦Š</div>
            </div>
        </div>
        
        <div style="flex-grow:1;"></div>
        <button id="heat-btn">ğŸ”¥ ë¶ˆ ì¡°ì ˆ (ëˆ„ë¥´ê³  ìˆê¸°)</button>
    </div>

    <div id="stage-5" class="stage">
        <h2>5ë‹¨ê³„: í† í•‘ ì£¼ë¬¸ (3ì—°ì†)</h2>
        <p class="info-text">ì£¼ë¬¸ ìˆœì„œëŒ€ë¡œ í† í•‘ì„ ì˜¬ë¦¬ì„¸ìš”!<br>ì‹œê°„ì´ ì´‰ë°•í•©ë‹ˆë‹¤!</p>
        <div class="character">ğŸ¶</div>
        
        <div id="order-display">ì£¼ë¬¸ í™•ì¸ ì¤‘...</div>

        <div id="topping-box">
            </div>
    </div>

    <div id="result-screen" class="stage">
        <h2>ğŸ‰ ì™„ì„±! ğŸ‰</h2>
        <div class="character" id="result-img">ğŸ¥</div>
        <div class="final-grade" id="final-grade-text"></div>
        <div id="score-board" style="background: #f9f9f9; padding: 10px; border-radius: 10px; margin-bottom: 20px;">
            <div class="score-row"><span>ê³„ë€</span><span id="score-1">0</span></div>
            <div class="score-row"><span>ë°˜ì£½</span><span id="score-2">0</span></div>
            <div class="score-row"><span>ë¨¸ë­</span><span id="score-3">0</span></div>
            <div class="score-row"><span>êµ½ê¸°</span><span id="score-4">0</span></div>
            <div class="score-row"><span>í† í•‘</span><span id="score-5">0</span></div>
            <hr>
            <div class="score-row" style="font-weight:bold;"><span>ì´ì </span><span id="score-total">0</span></div>
        </div>
        <button id="restart-btn">ë‹¤ì‹œ ë§Œë“¤ê¸°</button>
    </div>
</div>

<script src="game.js"></script>
</body>
</html>
